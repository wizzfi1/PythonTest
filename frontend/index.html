<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Multimodal Product Recommendation System</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body { background: #f7f7f7; }
.container-box {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 14px rgba(0,0,0,0.08);
    margin-top: 30px;
}
.result-box {
    background: #f0f0f0;
    border-radius: 8px;
    padding: 15px;
    margin-top: 15px;
    white-space: pre-wrap;
}
</style>
</head>

<body>
<div class="container">
    <h2 class="text-center mt-4 mb-3">üì¶ Multimodal Product Recommendation System</h2>

    <!-- ---------------- MODULE 1: TEXT SEARCH ---------------- -->
    <div class="container-box">
        <h4>üîé Module 1 ‚Äî Product Text Search</h4>
        <input id="queryInput" type="text" class="form-control" placeholder="Enter a product keyword (e.g. 'white heart')" />
        <button onclick="runTextSearch()" class="btn btn-primary mt-3">Search</button>
        <div id="textResult" class="result-box"></div>
    </div>

    <!-- ---------------- MODULE 2: OCR HANDWRITTEN QUERY ---------------- -->
    <div class="container-box">
        <h4>‚úçÔ∏è Module 2 ‚Äî Handwritten OCR Query</h4>
        <input id="ocrInput" type="file" accept="image/*" class="form-control" />
        <button onclick="runOCR()" class="btn btn-warning mt-3">Upload & Extract Text</button>
        <div id="ocrResult" class="result-box"></div>
    </div>

    <!-- ---------------- MODULE 3: CNN IMAGE PRODUCT SEARCH ---------------- -->
    <div class="container-box">
        <h4>üñºÔ∏è Module 3 ‚Äî Image Product Classifier</h4>
        <input id="imgInput" type="file" accept="image/*" class="form-control" />
        <button onclick="runImageSearch()" class="btn btn-success mt-3">Upload Image</button>
        <div id="imgResult" class="result-box"></div>
    </div>
</div>

<script>
const BASE_URL = "https://legendary-space-invention-4jvv5q77xp9rc5q9r-5000.app.github.dev";

// ---------------- MODULE 1: TEXT SEARCH ----------------
async function runTextSearch() {
    const query = document.getElementById("queryInput").value;
    let form = new FormData();
    form.append("query", query);

    let res = await fetch(`${BASE_URL}/product-recommendation`, {
        method: "POST",
        body: form
    });

    let data = await res.json();
    document.getElementById("textResult").innerText = JSON.stringify(data, null, 2);
}

// ---------------- MODULE 2: OCR ----------------
async function runOCR() {
    let file = document.getElementById("ocrInput").files[0];
    let form = new FormData();
    form.append("image_data", file);

    let res = await fetch(`${BASE_URL}/ocr-query`, {
        method: "POST",
        body: form
    });

    let data = await res.json();
    document.getElementById("ocrResult").innerText = JSON.stringify(data, null, 2);
}

// ---------------- MODULE 3: CNN IMAGE CLASSIFIER ----------------
async function runImageSearch() {
    let file = document.getElementById("imgInput").files[0];
    let form = new FormData();
    form.append("product_image", file);

    let res = await fetch(`${BASE_URL}/image-product-search`, {
        method: "POST",
        body: form
    });

    let data = await res.json();
    document.getElementById("imgResult").innerText = JSON.stringify(data, null, 2);
}
</script>

</body>
</html>
